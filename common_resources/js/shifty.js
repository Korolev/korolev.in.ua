(function(){var e;(function(t){function s(e,t){var n;for(n in e){if(e.hasOwnProperty(n)){t(e,n)}}}function o(e,t){s(t,function(t,n){e[n]=t[n]});return e}function u(e,t){s(t,function(t,n){if(typeof e[n]==="undefined"){e[n]=t[n]}});return e}function a(e,t,n){var r,s;s=(e-t.timestamp)/t.duration;for(r in n.current){if(n.current.hasOwnProperty(r)&&t.to.hasOwnProperty(r)){n.current[r]=f(t.originalState[r],t.to[r],i[t.easing[r]],s)}}return n.current}function f(e,t,n,r){return e+(t-e)*n(r)}function l(e,t){return setTimeout(e,1e3/t)}function c(e,t,n,r){var i;for(i=0;i<t[e].length;i++){t[e][i].apply(n,r)}}function h(t,n,r){s(e.prototype.filter,function(e,i){if(e[i][t]){e[i][t].apply(n,r)}})}function p(e,t){var r=e.timestamp+e.duration,i=Math.min(n(),r),s=i>=r;if(t.isTweening){if(!s){t.loopId=l(function(){p(e,t)},e.owner.fps)}h("beforeTween",e.owner,[t.current,e.originalState,e.to]);a(i,e,t);h("afterTween",e.owner,[t.current,e.originalState,e.to]);if(e.hook.step){c("step",e.hook,e.owner,[t.current])}if(e.step){e.step.call(t.current,t.current)}}if(s||!t.isTweening){e.owner.stop(true)}}function d(e,t){var n;n={};if(typeof t==="string"){s(e,function(e,r){n[r]=t})}else{s(e,function(e,i){if(!n[i]){n[i]=t[i]||r}})}return n}var n,r="linear",i;if(typeof SHIFTY_DEBUG_NOW==="function"){n=SHIFTY_DEBUG_NOW}else{n=function(){return+(new Date)}}if(typeof SHIFTY_DEBUG_NOW==="function"){t.timeoutHandler=p}e=function(e){e=e||{};this._hook={};this._tweenParams={owner:this,hook:this._hook,data:{}};this._state={};this._state.current=e.initialState||{};this.fps=e.fps||30;this.easing=e.easing||r;this.duration=e.duration||500;return this};e.prototype.tween=function(e,t,r,i,s){var a,f,l;if(this._state.isTweening){return}a=this;f=this._tweenParams;l=this._state;this._state.loopId=0;this._state.pausedAtTime=null;if(t){f.to=t||{};f.duration=r||this.duration;f.callback=i;f.easing=s||this.easing;l.current=e||{}}else{f.step=e.step;f.callback=e.callback;f.to=e.to||e.target||{};f.duration=e.duration||this.duration;f.easing=e.easing||this.easing;l.current=e.from||{}}f.timestamp=n();u(l.current,f.to);u(f.to,l.current);f.easing=d(l.current,f.easing);h("tweenCreated",f.owner,[l.current,f.originalState,f.to]);f.originalState=o({},l.current);l.isTweening=true;this.resume();if(e.start){e.start()}return this};e.prototype.to=function(t,n,r,i){if(arguments.length===1){if("to"in t){t.from=this.get();this.tween(t)}else{this.tween(this.get(),t)}}else{this.tween(this.get(),t,n,r,i)}return this};e.prototype.get=function(){return this._state.current};e.prototype.set=function(e){this._state.current=e||{};return this};e.prototype.stop=function(e){clearTimeout(this._state.loopId);this._state.isTweening=false;if(e){o(this._state.current,this._tweenParams.to);h("afterTweenEnd",this,[this._state.current,this._tweenParams.originalState,this._tweenParams.to]);if(this._tweenParams.callback){this._tweenParams.callback.call(this._state.current,this._state.current)}}return this};e.prototype.pause=function(){clearTimeout(this._state.loopId);this._state.pausedAtTime=n();this._state.isPaused=true;return this};e.prototype.resume=function(){var e;e=this;if(this._state.isPaused){this._tweenParams.timestamp+=n()-this._state.pausedAtTime}p(e._tweenParams,e._state);return this};e.prototype.hookAdd=function(e,t){if(!this._hook.hasOwnProperty(e)){this._hook[e]=[]}this._hook[e].push(t)};e.prototype.hookRemove=function(e,t){var n;if(!this._hook.hasOwnProperty(e)){return}if(!t){this._hook[e]=[];return}for(n=this._hook[e].length;n>=0;n++){if(this._hook[e][n]===t){this._hook[e].splice(n,1)}}};e.prototype.filter={};e.util={now:n,each:s,tweenProps:a,tweenProp:f,applyFilter:h,simpleCopy:o,weakCopy:u,composeEasingObject:d};i=e.prototype.formula={linear:function(e){return e}};if(typeof exports==="object"){module.exports=e}else if(typeof define==="function"&&define.amd){define(function(){return e})}else if(typeof t.Tweenable==="undefined"){t.Tweenable=e}})(this);(function(){e.util.simpleCopy(e.prototype.formula,{easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){if((e/=.5)<1)return.5*Math.pow(e,2);return-.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){if((e/=.5)<1)return.5*Math.pow(e,3);return.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){if((e/=.5)<1)return.5*Math.pow(e,4);return-.5*((e-=2)*Math.pow(e,3)-2)},easeInQuint:function(e){return Math.pow(e,5)},easeOutQuint:function(e){return Math.pow(e-1,5)+1},easeInOutQuint:function(e){if((e/=.5)<1)return.5*Math.pow(e,5);return.5*(Math.pow(e-2,5)+2)},easeInSine:function(e){return-Math.cos(e*(Math.PI/2))+1},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return e==0?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return e==1?1:-Math.pow(2,-10*e)+1},easeInOutExpo:function(e){if(e==0)return 0;if(e==1)return 1;if((e/=.5)<1)return.5*Math.pow(2,10*(e-1));return.5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){if((e/=.5)<1)return-.5*(Math.sqrt(1-e*e)-1);return.5*(Math.sqrt(1-(e-=2)*e)+1)},easeOutBounce:function(e){if(e<1/2.75){return 7.5625*e*e}else if(e<2/2.75){return 7.5625*(e-=1.5/2.75)*e+.75}else if(e<2.5/2.75){return 7.5625*(e-=2.25/2.75)*e+.9375}else{return 7.5625*(e-=2.625/2.75)*e+.984375}},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e=e-1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;if((e/=.5)<1)return.5*e*e*(((t*=1.525)+1)*e-t);return.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},elastic:function(e){return-1*Math.pow(4,-8*e)*Math.sin((e*6-1)*2*Math.PI/2)+1},swingFromTo:function(e){var t=1.70158;return(e/=.5)<1?.5*e*e*(((t*=1.525)+1)*e-t):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},swingFrom:function(e){var t=1.70158;return e*e*((t+1)*e-t)},swingTo:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},bounce:function(e){if(e<1/2.75){return 7.5625*e*e}else if(e<2/2.75){return 7.5625*(e-=1.5/2.75)*e+.75}else if(e<2.5/2.75){return 7.5625*(e-=2.25/2.75)*e+.9375}else{return 7.5625*(e-=2.625/2.75)*e+.984375}},bouncePast:function(e){if(e<1/2.75){return 7.5625*e*e}else if(e<2/2.75){return 2-(7.5625*(e-=1.5/2.75)*e+.75)}else if(e<2.5/2.75){return 2-(7.5625*(e-=2.25/2.75)*e+.9375)}else{return 2-(7.5625*(e-=2.625/2.75)*e+.984375)}},easeFromTo:function(e){if((e/=.5)<1)return.5*Math.pow(e,4);return-.5*((e-=2)*Math.pow(e,3)-2)},easeFrom:function(e){return Math.pow(e,4)},easeTo:function(e){return Math.pow(e,.25)}})})();(function(){function n(e){e.shift();if(e.length){e[0]()}else{e.running=false}}function r(e,t){return function(){e();n(t)}}function i(e,t,n,r,i,s){return function(){if(n){e.tween(t,n,r,i,s)}else{t.callback=i;if(t.from){e.tween(t)}else{e.to(t)}}}}var t=function(){};e.prototype.queue=function(e,n,s,o,u){var a;if(!this._tweenQueue){this._tweenQueue=[]}o=o||e.callback||t;a=r(o,this._tweenQueue);this._tweenQueue.push(i(this,e,n,s,a,u));return this};e.prototype.queueStart=function(){if(!this._tweenQueue.running&&this._tweenQueue.length>0){this._tweenQueue[0]();this._tweenQueue.running=true}return this};e.prototype.queueShift=function(){this._tweenQueue.shift();return this};e.prototype.queuePop=function(){this._tweenQueue.pop();return this};e.prototype.queueEmpty=function(){this._tweenQueue.length=0;return this};e.prototype.queueLength=function(){return this._tweenQueue.length}})();(function(){function s(e){return parseInt(e,16)}function o(e){e=e.replace(/#/g,"");if(e.length===3){e=e.split("");e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]}return[s(e.substr(0,2)),s(e.substr(2,2)),s(e.substr(4,2))]}function u(e){var t,n;t=o(e);n="rgb("+t[0]+","+t[1]+","+t[2]+")";return n}function a(e){return typeof e==="string"&&(t.test(e)||n.test(e)||r.test(e))}function f(e){return typeof e==="string"&&(t.test(e)||n.test(e))}function l(t){e.util.each(t,function(e,t){if(f(e[t])){e[t]=u(e[t])}})}function c(t){var n;n=[];e.util.each(t,function(e,t){if(a(e[t])){n.push(t)}});return n}function h(e){return e.match(/(\d+)/g)}function p(e,t){var n,r,i;r=t.length;for(n=0;n<r;n++){i=h(e[t[n]]);e["__r__"+t[n]]=+i[0];e["__g__"+t[n]]=+i[1];e["__b__"+t[n]]=+i[2];delete e[t[n]]}}function d(e,t){var n,r;r=t.length;for(n=0;n<r;n++){e[t[n]]="rgb("+parseInt(e["__r__"+t[n]],10)+","+parseInt(e["__g__"+t[n]],10)+","+parseInt(e["__b__"+t[n]],10)+")";delete e["__r__"+t[n]];delete e["__g__"+t[n]];delete e["__b__"+t[n]]}}function v(e,t){var n,r;r=t.length;for(n=0;n<r;n++){e["__r__"+t[n]]=e[t[n]];e["__g__"+t[n]]=e[t[n]];e["__b__"+t[n]]=e[t[n]]}}function m(e,t){var n,r;r=t.length;for(n=0;n<r;n++){delete e["__r__"+t[n]];delete e["__g__"+t[n]];delete e["__b__"+t[n]]}}var t=/^#([0-9]|[a-f]){3}$/i,n=/^#([0-9]|[a-f]){6}$/i,r=/^rgb\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)\s*$/i,i;if(!e){return}e.prototype.filter.color={tweenCreated:function(e,t,n){l(e);l(t);l(n)},beforeTween:function(e,t,n){i=c(t);p(e,i);p(t,i);p(n,i);v(this._tweenParams.easing,i)},afterTween:function(e,t,n){d(e,i);d(t,i);d(n,i);m(this._tweenParams.easing,i)}}})();(function(){function r(e){return typeof e==="string"&&e.match(t)}function i(e){return e.replace(/\(/g,"\\(").replace(/\)/g,"\\)")}function s(n){var i;i={};e.util.each(n,function(e,n){var s=e[n];if(r(s)){var o=s.match(t);if(o.length===1){o.unshift("")}i[n]=o}});return i}function o(t,n){e.util.each(n,function(e,r){var s=n[r];var o;var u=i(s[0]);var a=i(s[1]);if(s[0]===""){o=new RegExp(a,"g")}else{o=new RegExp("("+u+"|"+a+")","g")}t[r]=+t[r].replace(o,"")})}function u(t,n){e.util.each(n,function(e,n){var r=e[n];t[n]=r[0]+t[n]+r[1]})}var t=/\D+/g;var n;e.prototype.filter.token={beforeTween:function(e,t,r){n=s(t);o(e,n);o(t,n);o(r,n)},afterTween:function(e,t,r){u(e,n);u(t,n);u(r,n)}}})();(function(){function t(t,n,r,i,s){var o;o=e.util.composeEasingObject(t,s);return e.util.tweenProps(i,{originalState:t,to:r,timestamp:0,duration:1,easing:o},{current:n})}if(!e){return}e.util.interpolate=function(n,r,i,s){var o,u,a;if(n&&n.from){r=n.to;i=n.position;s=n.easing;n=n.from}a=new e;a._tweenParams.easing=s||"linear";o=e.util.simpleCopy({},n);e.util.applyFilter("tweenCreated",a,[o,n,r]);e.util.applyFilter("beforeTween",a,[o,n,r]);u=t(n,o,r,i,a._tweenParams.easing);e.util.applyFilter("afterTween",a,[u,n,r]);return u};e.prototype.interpolate=function(t,n,r){var i;i=e.util.interpolate(this.get(),t,n,r);this.set(i);return i}})();(function(){var t=false;e.util.enableRounding=function(){t=true};e.util.disableRounding=function(){t=false};e.util.isRoundingEnabled=function(){return t};e.prototype.filter.round={afterTween:function(n,r,i){if(t){e.util.each(n,function(e,t){if(!e[t].replace){e[t]=Math.round(e[t])}})}}}})()})()